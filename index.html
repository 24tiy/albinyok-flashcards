<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <title>Albinyok Flashcards</title>
  <meta name="description" content="Smart flashcards for efficient learning">
  <meta name="theme-color" content="#0f0f23">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="logo.png">
  <link rel="apple-touch-icon" href="logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      --font: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;

      /* Dark theme defaults */
      --bg-gradient-1: #0f0f23;
      --bg-gradient-2: #1a1a3e;
      --bg-gradient-3: #0d0d1f;

      --glass-bg: rgba(255, 255, 255, 0.03);
      --glass-bg-hover: rgba(255, 255, 255, 0.06);
      --glass-border: rgba(255, 255, 255, 0.08);
      --glass-border-hover: rgba(255, 255, 255, 0.15);

      --text-primary: rgba(255, 255, 255, 0.95);
      --text-secondary: rgba(255, 255, 255, 0.6);
      --text-muted: rgba(255, 255, 255, 0.35);

      --header-bg-start: rgba(15, 15, 35, 0.95);
      --header-bg-end: rgba(15, 15, 35, 0.8);
      --bottom-bar-bg: rgba(15, 15, 35, 0.95);

      --input-bg: rgba(255, 255, 255, 0.03);
      --input-bg-hover: rgba(255, 255, 255, 0.05);
      --progress-track-bg: rgba(255, 255, 255, 0.1);

      --card-front-bg: rgba(255, 255, 255, 0.03);
      --card-front-highlight: rgba(255,255,255,0.1);
      --card-hint-bar: rgba(255,255,255,0.05);

      --orb-1: rgba(99, 102, 241, 0.3);
      --orb-2: rgba(139, 92, 246, 0.25);

      --select-arrow: rgba(255,255,255,0.5);

      --accent: #6366f1;
      --accent-light: #818cf8;
      --accent-glow: rgba(99, 102, 241, 0.4);

      --success: #10b981;
      --success-glow: rgba(16, 185, 129, 0.4);
      --danger: #f43f5e;
      --danger-glow: rgba(244, 63, 94, 0.4);
      --warning: #f59e0b;
      --warning-glow: rgba(245, 158, 11, 0.4);

      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);

      --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
      --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
      --spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* ==================== LIGHT THEME ==================== */
    [data-theme="light"] {
      --bg-gradient-1: #f0f2ff;
      --bg-gradient-2: #e8ecff;
      --bg-gradient-3: #f5f7ff;

      --glass-bg: rgba(255, 255, 255, 0.65);
      --glass-bg-hover: rgba(255, 255, 255, 0.85);
      --glass-border: rgba(99, 102, 241, 0.12);
      --glass-border-hover: rgba(99, 102, 241, 0.28);

      --text-primary: rgba(15, 15, 40, 0.92);
      --text-secondary: rgba(15, 15, 40, 0.58);
      --text-muted: rgba(15, 15, 40, 0.35);

      --header-bg-start: rgba(240, 242, 255, 0.96);
      --header-bg-end: rgba(240, 242, 255, 0.82);
      --bottom-bar-bg: rgba(240, 242, 255, 0.96);

      --input-bg: rgba(255, 255, 255, 0.8);
      --input-bg-hover: rgba(255, 255, 255, 0.95);
      --progress-track-bg: rgba(99, 102, 241, 0.12);

      --card-front-bg: rgba(255, 255, 255, 0.8);
      --card-front-highlight: rgba(99,102,241,0.06);
      --card-hint-bar: rgba(99,102,241,0.05);

      --orb-1: rgba(99, 102, 241, 0.12);
      --orb-2: rgba(139, 92, 246, 0.10);

      --select-arrow: rgba(15,15,40,0.45);
    }

    [data-theme="light"] .app {
      background:
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(99, 102, 241, 0.1), transparent),
        radial-gradient(ellipse 60% 40% at 100% 100%, rgba(139, 92, 246, 0.07), transparent),
        radial-gradient(ellipse 40% 60% at 0% 80%, rgba(59, 130, 246, 0.05), transparent),
        linear-gradient(180deg, #f0f2ff 0%, #e8ecff 50%, #f5f7ff 100%) !important;
    }

    [data-theme="light"] .app::before {
      background: radial-gradient(circle, rgba(99, 102, 241, 0.12), transparent 70%);
    }
    [data-theme="light"] .app::after {
      background: radial-gradient(circle, rgba(139, 92, 246, 0.10), transparent 70%);
    }

    [data-theme="light"] .brand-name {
      background: linear-gradient(135deg, #1e1b4b 0%, #3730a3 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    [data-theme="light"] .header {
      background: linear-gradient(180deg, var(--header-bg-start) 0%, var(--header-bg-end) 100%);
      border-bottom-color: rgba(99,102,241,0.15);
    }

    [data-theme="light"] .bottom-bar {
      background: linear-gradient(180deg, transparent 0%, var(--bottom-bar-bg) 20%);
    }

    [data-theme="light"] .card-front {
      background:
        linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(240,242,255,0.7) 100%);
      border-color: rgba(99,102,241,0.15);
      box-shadow: 0 20px 60px rgba(99,102,241,0.12), 0 0 0 1px rgba(255,255,255,0.8) inset;
    }

    [data-theme="light"] .card-front::before {
      background: linear-gradient(90deg, transparent, rgba(99,102,241,0.12), transparent);
    }

    [data-theme="light"] .section {
      box-shadow: 0 2px 12px rgba(99,102,241,0.07);
    }

    [data-theme="light"] .upload-zone {
      border-color: rgba(99,102,241,0.2);
    }
    [data-theme="light"] .upload-zone:hover,
    [data-theme="light"] .upload-zone.dragover {
      border-color: var(--accent);
      background: rgba(99,102,241,0.04);
    }

    [data-theme="light"] .upload-text {
      color: var(--text-secondary);
    }

    [data-theme="light"] .hint-box {
      background: linear-gradient(135deg, rgba(245,158,11,0.12), rgba(245,158,11,0.04));
    }

    [data-theme="light"] .preview-item {
      background: rgba(99,102,241,0.04);
    }
    [data-theme="light"] .preview-item input {
      background: rgba(255,255,255,0.85);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-primary);
    }

    [data-theme="light"] .editor-item {
      background: rgba(99,102,241,0.04);
    }
    [data-theme="light"] .editor-item input {
      background: rgba(255,255,255,0.85);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-primary);
    }

    [data-theme="light"] .toast {
      background: rgba(255,255,255,0.85);
      border-color: rgba(99,102,241,0.2);
      color: var(--text-primary);
      box-shadow: 0 10px 40px rgba(99,102,241,0.15);
    }
    [data-theme="light"] .toast.success { color: #059669; border-color: rgba(16,185,129,0.3); }
    [data-theme="light"] .toast.error { color: #e11d48; border-color: rgba(244,63,94,0.3); }

    [data-theme="light"] .stat-badge.neutral {
      background: rgba(99,102,241,0.07);
      color: var(--text-secondary);
      border-color: rgba(99,102,241,0.12);
    }

    [data-theme="light"] .stats-bar {
      box-shadow: 0 2px 12px rgba(99,102,241,0.07);
    }

    [data-theme="light"] .btn-secondary {
      background: rgba(255,255,255,0.75);
      color: var(--text-primary);
      border-color: rgba(99,102,241,0.15);
      box-shadow: 0 2px 8px rgba(99,102,241,0.08);
    }
    [data-theme="light"] .btn-secondary:hover {
      background: rgba(255,255,255,0.95);
      border-color: rgba(99,102,241,0.28);
    }

    [data-theme="light"] .btn-icon {
      background: rgba(255,255,255,0.75);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-primary);
    }
    [data-theme="light"] .btn-icon:hover {
      background: rgba(255,255,255,0.95);
    }

    [data-theme="light"] .btn-flip {
      background: rgba(255,255,255,0.75);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-primary);
    }
    [data-theme="light"] .btn-flip:hover {
      background: rgba(255,255,255,0.95);
    }

    [data-theme="light"] .nav-btn {
      background: rgba(255,255,255,0.75);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-secondary);
    }
    [data-theme="light"] .nav-btn:hover {
      background: rgba(255,255,255,0.95);
      color: var(--text-primary);
    }

    [data-theme="light"] .cat-pill {
      background: rgba(255,255,255,0.7);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-secondary);
    }
    [data-theme="light"] .cat-pill:hover {
      background: rgba(255,255,255,0.95);
      color: var(--text-primary);
    }

    [data-theme="light"] .deck-chip {
      background: rgba(255,255,255,0.7);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-secondary);
    }
    [data-theme="light"] .deck-chip:hover {
      background: rgba(255,255,255,0.95);
      color: var(--text-primary);
    }

    [data-theme="light"] .toggle {
      background: rgba(99,102,241,0.1);
      border-color: rgba(99,102,241,0.15);
    }
    [data-theme="light"] .toggle::after {
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    [data-theme="light"] .select {
      background-color: rgba(255,255,255,0.75);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-primary);
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='rgba(15,15,40,0.45)' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
    }
    [data-theme="light"] .select:hover {
      background-color: rgba(255,255,255,0.95);
      border-color: rgba(99,102,241,0.28);
    }
    [data-theme="light"] .select option {
      background: #f0f2ff;
      color: #1e1b4b;
    }

    [data-theme="light"] .input-field {
      background: var(--input-bg);
      border-color: rgba(99,102,241,0.15);
      color: var(--text-primary);
    }
    [data-theme="light"] .input-field:hover {
      background: var(--input-bg-hover);
      border-color: rgba(99,102,241,0.28);
    }
    [data-theme="light"] .input-field::placeholder {
      color: var(--text-muted);
    }

    [data-theme="light"] .setting-item {
      border-bottom-color: rgba(99,102,241,0.1);
    }

    [data-theme="light"] .card-hint {
      color: var(--text-muted);
    }

    [data-theme="light"] .empty-title {
      background: linear-gradient(135deg, #1e1b4b, #4338ca);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    [data-theme="light"] details summary {
      color: var(--text-secondary);
    }

    /* ==================== BASE STYLES ==================== */
    html, body {
      font-family: var(--font);
      background: var(--bg-gradient-1);
      color: var(--text-primary);
      min-height: 100vh;
      min-height: 100dvh;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .app {
      min-height: 100vh;
      min-height: 100dvh;
      background:
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(99, 102, 241, 0.15), transparent),
        radial-gradient(ellipse 60% 40% at 100% 100%, rgba(139, 92, 246, 0.1), transparent),
        radial-gradient(ellipse 40% 60% at 0% 80%, rgba(59, 130, 246, 0.08), transparent),
        linear-gradient(180deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 50%, var(--bg-gradient-3) 100%);
      background-attachment: fixed;
      position: relative;
    }

    .app::before,
    .app::after {
      content: '';
      position: fixed;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.5;
      pointer-events: none;
      animation: float 20s ease-in-out infinite;
    }

    .app::before {
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, var(--orb-1), transparent 70%);
      top: -100px;
      right: -100px;
      animation-delay: -5s;
    }

    .app::after {
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, var(--orb-2), transparent 70%);
      bottom: 20%;
      left: -80px;
      animation-delay: -10s;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(30px, -30px) scale(1.05); }
      50% { transform: translate(-20px, 20px) scale(0.95); }
      75% { transform: translate(20px, 30px) scale(1.02); }
    }

    /* ==================== HEADER ==================== */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      padding: calc(16px + var(--safe-top)) 20px 16px;
      background: linear-gradient(180deg, var(--header-bg-start) 0%, var(--header-bg-end) 100%);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid var(--glass-border);
      transition: background 0.4s ease, border-color 0.4s ease;
    }

    .header-inner {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .logo {
      width: 46px;
      height: 46px;
      border-radius: 14px;
      background: url('logo.png') center/cover no-repeat;
      box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.3),
        0 0 0 1px var(--glass-border),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      transition: transform 0.3s var(--ease-out-back), box-shadow 0.3s ease;
    }

    .logo:hover {
      transform: scale(1.05) rotate(-2deg);
      box-shadow:
        0 8px 24px rgba(99, 102, 241, 0.3),
        0 0 0 1px var(--accent),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    .brand-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .brand-name {
      font-size: 1.25rem;
      font-weight: 700;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.8) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      transition: background 0.4s ease;
    }

    .brand-tagline {
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--text-secondary);
      letter-spacing: 0.02em;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* ==================== GLASS COMPONENTS ==================== */
    .glass {
      background: var(--glass-bg);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      transition: all 0.3s var(--ease-out-expo);
    }

    .glass:hover {
      background: var(--glass-bg-hover);
      border-color: var(--glass-border-hover);
    }

    /* ==================== BUTTONS ==================== */
    .btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-family: var(--font);
      font-weight: 600;
      font-size: 0.9375rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s var(--ease-out-expo);
      overflow: hidden;
      white-space: nowrap;
      text-decoration: none;
    }

    .btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(255,255,255,0.15) 0%, transparent 50%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .btn:hover::before { opacity: 1; }
    .btn:active { transform: scale(0.97); }
    .btn:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

    .btn-primary {
      padding: 14px 28px;
      background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
      color: white;
      border-radius: 14px;
      box-shadow: 0 4px 16px var(--accent-glow), 0 0 0 1px rgba(255,255,255,0.1) inset;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 32px var(--accent-glow), 0 0 0 1px rgba(255,255,255,0.2) inset, 0 0 60px -10px var(--accent);
    }

    .btn-secondary {
      padding: 14px 28px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      color: var(--text-primary);
      border-radius: 14px;
      border: 1px solid var(--glass-border);
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      transition: all 0.3s var(--ease-out-expo);
    }

    .btn-secondary:hover {
      background: var(--glass-bg-hover);
      border-color: var(--glass-border-hover);
      transform: translateY(-2px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }

    .btn-icon {
      width: 46px;
      height: 46px;
      padding: 0;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 14px;
      color: var(--text-primary);
      font-size: 1.25rem;
      transition: all 0.3s var(--ease-out-expo);
    }

    .btn-icon:hover {
      background: var(--glass-bg-hover);
      border-color: var(--glass-border-hover);
      transform: translateY(-2px) scale(1.02);
    }

    .btn-action {
      flex: 1;
      height: 60px;
      border-radius: 16px;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.01em;
    }

    .btn-success {
      background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
      color: white;
      box-shadow: 0 4px 20px var(--success-glow);
    }

    .btn-success:hover {
      box-shadow: 0 8px 40px var(--success-glow), 0 0 60px -10px var(--success);
      transform: translateY(-2px);
    }

    .btn-danger {
      background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
      color: white;
      box-shadow: 0 4px 20px var(--danger-glow);
    }

    .btn-danger:hover {
      box-shadow: 0 8px 40px var(--danger-glow), 0 0 60px -10px var(--danger);
      transform: translateY(-2px);
    }

    .btn-warning {
      background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
      color: white;
      box-shadow: 0 4px 20px var(--warning-glow);
    }

    .btn-flip {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      color: var(--text-primary);
      border: 1px solid var(--glass-border);
      transition: all 0.3s var(--ease-out-expo);
    }

    .btn-flip:hover {
      background: var(--glass-bg-hover);
      border-color: var(--glass-border-hover);
    }

    .select {
      padding: 12px 16px;
      padding-right: 40px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      color: var(--text-primary);
      font-family: var(--font);
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='rgba(255,255,255,0.5)' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 14px center;
      transition: all 0.3s var(--ease-out-expo);
    }

    .select:hover {
      border-color: var(--glass-border-hover);
      background-color: var(--glass-bg-hover);
    }

    .select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-glow);
    }

    /* ==================== MAIN ==================== */
    .main {
      position: relative;
      z-index: 1;
      padding: 20px;
      /* Increased bottom padding to prevent bottom bar overlap on all devices */
      padding-bottom: calc(300px + var(--safe-bottom));
      max-width: 600px;
      margin: 0 auto;
    }

    /* ==================== STATS BAR ==================== */
    .stats-bar {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
      padding: 16px 20px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 16px;
      animation: slideDown 0.5s var(--ease-out-expo);
      transition: background 0.4s ease, border-color 0.4s ease;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .progress-section {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .progress-track {
      flex: 1;
      height: 8px;
      background: var(--progress-track-bg);
      border-radius: 100px;
      overflow: hidden;
      position: relative;
    }

    .progress-track::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-light));
      border-radius: 100px;
      transition: width 0.5s var(--ease-out-expo);
      position: relative;
      box-shadow: 0 0 20px var(--accent-glow);
    }

    .progress-label {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-secondary);
      min-width: 50px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .stat-badges { display: flex; gap: 8px; }

    .stat-badge {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      border-radius: 100px;
      font-size: 0.8125rem;
      font-weight: 600;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transition: all 0.3s var(--ease-out-expo);
    }

    .stat-badge:hover { transform: scale(1.05); }

    .stat-badge.success {
      background: rgba(16, 185, 129, 0.15);
      color: #34d399;
      border: 1px solid rgba(16, 185, 129, 0.2);
    }

    .stat-badge.danger {
      background: rgba(244, 63, 94, 0.15);
      color: #fb7185;
      border: 1px solid rgba(244, 63, 94, 0.2);
    }

    .stat-badge.neutral {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-secondary);
      border: 1px solid var(--glass-border);
    }

    /* ==================== CATEGORIES ==================== */
    .categories {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding: 4px 0 20px;
      margin: 0 -20px;
      padding-left: 20px;
      padding-right: 20px;
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch;
      animation: slideUp 0.5s var(--ease-out-expo) 0.1s both;
    }

    .categories::-webkit-scrollbar { display: none; }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .cat-pill {
      flex-shrink: 0;
      padding: 10px 20px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 100px;
      color: var(--text-secondary);
      font-family: var(--font);
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s var(--ease-out-expo);
      white-space: nowrap;
    }

    .cat-pill:hover {
      background: var(--glass-bg-hover);
      border-color: var(--glass-border-hover);
      color: var(--text-primary);
      transform: translateY(-2px);
    }

    .cat-pill.active {
      background: linear-gradient(135deg, var(--accent), #8b5cf6);
      border-color: transparent;
      color: white;
      box-shadow: 0 4px 20px var(--accent-glow);
    }

    /* ==================== FLASHCARD ==================== */
    .card-container {
      perspective: 1500px;
      margin-bottom: 20px;
      animation: cardAppear 0.6s var(--ease-out-expo) 0.2s both;
    }

    @keyframes cardAppear {
      from { opacity: 0; transform: translateY(40px) rotateX(-10deg); }
      to { opacity: 1; transform: translateY(0) rotateX(0); }
    }

    .flashcard {
      position: relative;
      min-height: 320px;
      transform-style: preserve-3d;
      transition: transform 0.7s var(--ease-out-expo);
      cursor: pointer;
    }

    .flashcard.flipped { transform: rotateY(180deg); }
    .flashcard.swiping { transition: none; }

    .flashcard.swipe-left { animation: swipeLeft 0.4s var(--ease-out-expo) forwards; }
    .flashcard.swipe-right { animation: swipeRight 0.4s var(--ease-out-expo) forwards; }

    @keyframes swipeLeft {
      to { transform: translateX(-120%) rotate(-20deg); opacity: 0; }
    }
    @keyframes swipeRight {
      to { transform: translateX(120%) rotate(20deg); opacity: 0; }
    }

    .flashcard.correct { animation: successPulse 0.6s var(--ease-out-expo); }
    .flashcard.incorrect { animation: errorPulse 0.6s var(--ease-out-expo); }

    @keyframes successPulse {
      0% { box-shadow: 0 0 0 0 var(--success-glow); }
      50% { box-shadow: 0 0 0 15px transparent, 0 0 60px var(--success-glow); }
      100% { box-shadow: 0 0 0 0 transparent; }
    }
    @keyframes errorPulse {
      0% { box-shadow: 0 0 0 0 var(--danger-glow); }
      50% { box-shadow: 0 0 0 15px transparent, 0 0 60px var(--danger-glow); }
      100% { box-shadow: 0 0 0 0 transparent; }
    }

    .card-face {
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      border-radius: 28px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 32px 28px;
      text-align: center;
      overflow: hidden;
    }

    .card-front {
      background:
        linear-gradient(135deg, var(--card-front-highlight) 0%, rgba(255,255,255,0.02) 100%),
        var(--glass-bg);
      backdrop-filter: blur(40px) saturate(180%);
      -webkit-backdrop-filter: blur(40px) saturate(180%);
      border: 1px solid var(--glass-border);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255,255,255,0.05) inset;
      transition: background 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease;
    }

    .card-front::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    }

    .card-back {
      background: linear-gradient(135deg, var(--accent) 0%, #7c3aed 50%, #8b5cf6 100%);
      transform: rotateY(180deg);
      box-shadow: 0 20px 60px var(--accent-glow), 0 0 0 1px rgba(255,255,255,0.1) inset;
    }

    .card-back::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse at top left, rgba(255,255,255,0.2), transparent 50%),
        radial-gradient(ellipse at bottom right, rgba(0,0,0,0.2), transparent 50%);
    }

    .card-label {
      position: absolute;
      top: 20px;
      font-size: 0.6875rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      padding: 6px 14px;
      border-radius: 100px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .card-label.num {
      left: 20px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-secondary);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .card-back .card-label.num {
      background: rgba(255, 255, 255, 0.15);
      color: rgba(255, 255, 255, 0.8);
      border-color: rgba(255,255,255,0.2);
    }

    .card-label.cat {
      right: 20px;
      background: linear-gradient(135deg, var(--accent), #8b5cf6);
      color: white;
      border: none;
      box-shadow: 0 2px 10px var(--accent-glow);
    }

    .card-back .card-label.cat {
      background: rgba(255, 255, 255, 0.2);
      box-shadow: none;
    }

    .card-text {
      font-size: 1.5rem;
      font-weight: 600;
      line-height: 1.5;
      letter-spacing: -0.01em;
      max-width: 100%;
      word-wrap: break-word;
      position: relative;
      z-index: 1;
      color: var(--text-primary);
      transition: color 0.4s ease;
    }

    .card-back .card-text { color: white; font-weight: 500; }

    .card-hint {
      position: absolute;
      bottom: 20px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8125rem;
      font-weight: 500;
      color: var(--text-muted);
      opacity: 0.8;
      transition: color 0.4s ease;
    }

    .card-back .card-hint { color: rgba(255, 255, 255, 0.5); }

    .card-hint svg {
      width: 16px;
      height: 16px;
      animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }

    /* ==================== HINT BOX ==================== */
    .hint-box {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(245, 158, 11, 0.05));
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(245, 158, 11, 0.2);
      border-radius: 16px;
      margin-bottom: 20px;
      animation: hintAppear 0.4s var(--ease-out-back);
    }

    @keyframes hintAppear {
      from { opacity: 0; transform: translateY(-10px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .hint-box.hidden { display: none; }

    .hint-icon { font-size: 1.5rem; animation: pulse 2s ease-in-out infinite; }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .hint-text { font-size: 1rem; font-weight: 600; color: #fbbf24; letter-spacing: 0.02em; }

    /* ==================== SWIPE INDICATORS ==================== */
    .swipe-indicator {
      position: fixed;
      top: 50%;
      transform: translateY(-50%) scale(0.8);
      font-size: 4rem;
      opacity: 0;
      transition: all 0.2s var(--ease-out-expo);
      pointer-events: none;
      z-index: 50;
      filter: drop-shadow(0 0 30px currentColor);
    }

    .swipe-indicator.left { left: 30px; color: var(--danger); }
    .swipe-indicator.right { right: 30px; color: var(--success); }
    .swipe-indicator.show { opacity: 1; transform: translateY(-50%) scale(1); }

    /* ==================== BOTTOM BAR ==================== */
    .bottom-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 20px;
      padding-bottom: calc(20px + var(--safe-bottom));
      background: linear-gradient(180deg, transparent 0%, var(--bottom-bar-bg) 20%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      transition: background 0.4s ease;
    }

    .bottom-bar-inner {
      max-width: 600px;
      margin: 0 auto;
    }

    .controls-row {
      display: flex;
      gap: 12px;
      margin-bottom: 14px;
    }

    .controls-row:last-child { margin-bottom: 0; }

    .controls-nav {
      display: flex;
      justify-content: center;
      gap: 8px;
    }

    .nav-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 12px 18px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      color: var(--text-secondary);
      font-family: var(--font);
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s var(--ease-out-expo);
    }

    .nav-btn:hover {
      background: var(--glass-bg-hover);
      border-color: var(--glass-border-hover);
      color: var(--text-primary);
      transform: translateY(-2px);
    }

    .nav-btn:active { transform: translateY(0) scale(0.98); }

    /* ==================== SECTIONS ==================== */
    .section {
      margin-bottom: 16px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.3s var(--ease-out-expo);
      animation: sectionAppear 0.5s var(--ease-out-expo) both;
    }

    .section:nth-child(1) { animation-delay: 0s; }
    .section:nth-child(2) { animation-delay: 0.05s; }
    .section:nth-child(3) { animation-delay: 0.1s; }
    .section:nth-child(4) { animation-delay: 0.15s; }
    .section:nth-child(5) { animation-delay: 0.2s; }

    @keyframes sectionAppear {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section:hover { border-color: var(--glass-border-hover); }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 22px;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s ease;
    }

    .section-header:hover { background: rgba(255, 255, 255, 0.02); }

    .section-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1rem;
      font-weight: 600;
    }

    .section-title-icon { font-size: 1.25rem; }

    .section-arrow {
      color: var(--text-muted);
      font-size: 0.75rem;
      transition: transform 0.3s var(--ease-out-expo);
    }

    .section.open .section-arrow { transform: rotate(180deg); }

    .section-body {
      display: none;
      padding: 0 22px 22px;
      animation: expandIn 0.3s var(--ease-out-expo);
    }

    @keyframes expandIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .section.open .section-body { display: block; }

    /* ==================== UPLOAD ZONE ==================== */
    .upload-zone {
      border: 2px dashed rgba(255, 255, 255, 0.15);
      border-radius: 16px;
      padding: 40px 24px;
      text-align: center;
      transition: all 0.3s var(--ease-out-expo);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .upload-zone::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, var(--accent-glow), transparent 70%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .upload-zone:hover,
    .upload-zone.dragover {
      border-color: var(--accent);
      background: rgba(99, 102, 241, 0.05);
    }

    .upload-zone:hover::before,
    .upload-zone.dragover::before { opacity: 0.5; }

    .upload-icon { font-size: 3rem; margin-bottom: 16px; opacity: 0.8; }

    .upload-text {
      font-size: 1rem;
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .upload-text strong { color: var(--accent-light); font-weight: 600; }

    .upload-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
      z-index: 1;
    }

    .input-field {
      width: 100%;
      padding: 16px 20px;
      background: var(--input-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      border-radius: 14px;
      color: var(--text-primary);
      font-family: var(--font);
      font-size: 0.9375rem;
      transition: all 0.3s var(--ease-out-expo);
    }

    .input-field::placeholder { color: var(--text-muted); }

    .input-field:hover {
      border-color: var(--glass-border-hover);
      background: var(--input-bg-hover);
    }

    .input-field:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-glow);
      background: var(--input-bg-hover);
    }

    textarea.input-field {
      min-height: 120px;
      resize: vertical;
      line-height: 1.6;
    }

    /* ==================== DECK LIST ==================== */
    .deck-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 16px;
    }

    .deck-chip {
      padding: 12px 20px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 100px;
      color: var(--text-secondary);
      font-family: var(--font);
      font-size: 0.9375rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s var(--ease-out-expo);
    }

    .deck-chip:hover {
      background: var(--glass-bg-hover);
      border-color: var(--glass-border-hover);
      color: var(--text-primary);
      transform: translateY(-2px);
    }

    .deck-chip.active {
      background: linear-gradient(135deg, var(--accent), #8b5cf6);
      border-color: transparent;
      color: white;
      box-shadow: 0 4px 20px var(--accent-glow);
    }

    .deck-actions { display: flex; gap: 10px; }
    .deck-actions .btn { flex: 1; }

    /* ==================== SETTINGS ==================== */
    .setting-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 0;
      border-bottom: 1px solid var(--glass-border);
      transition: all 0.2s ease;
    }

    .setting-item:last-child { border-bottom: none; }

    .setting-info h4 { font-size: 0.9375rem; font-weight: 600; margin-bottom: 4px; }
    .setting-info p { font-size: 0.8125rem; color: var(--text-secondary); }

    .toggle {
      width: 52px;
      height: 30px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 100px;
      position: relative;
      cursor: pointer;
      transition: all 0.3s var(--ease-out-expo);
      border: 1px solid var(--glass-border);
      flex-shrink: 0;
    }

    .toggle:hover { background: rgba(255, 255, 255, 0.15); }

    .toggle.on {
      background: linear-gradient(135deg, var(--accent), #8b5cf6);
      border-color: transparent;
      box-shadow: 0 2px 10px var(--accent-glow);
    }

    .toggle::after {
      content: '';
      position: absolute;
      width: 24px;
      height: 24px;
      background: white;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: transform 0.3s var(--ease-out-back);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .toggle.on::after { transform: translateX(22px); }

    .settings-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
    }

    .settings-actions .btn {
      flex: 1;
      min-width: calc(50% - 5px);
    }

    /* ==================== AI GENERATOR ==================== */
    .ai-options { display: flex; gap: 12px; margin: 16px 0; }
    .ai-options .select { flex: 1; }

    .ai-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 32px;
      color: var(--text-secondary);
    }

    .spinner {
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .ai-preview { margin-top: 20px; }

    .preview-item {
      display: flex;
      gap: 10px;
      padding: 12px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      margin-bottom: 10px;
      align-items: center;
    }

    .preview-item input {
      flex: 1;
      padding: 12px 14px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--glass-border);
      border-radius: 10px;
      color: var(--text-primary);
      font-family: var(--font);
      font-size: 0.875rem;
    }

    .preview-item input:focus { outline: none; border-color: var(--accent); }

    .preview-item button {
      width: 40px;
      height: 40px;
      background: rgba(244, 63, 94, 0.15);
      color: var(--danger);
      border: 1px solid rgba(244, 63, 94, 0.2);
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .preview-item button:hover { background: rgba(244, 63, 94, 0.25); }

    .ai-preview-actions {
      display: flex;
      gap: 12px;
      margin-top: 16px;
    }

    .ai-preview-actions .btn { flex: 1; }

    /* ==================== EDITOR ==================== */
    .editor-item {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 14px;
      padding: 14px;
      margin-bottom: 12px;
    }

    .editor-item input {
      width: 100%;
      padding: 12px 14px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--glass-border);
      border-radius: 10px;
      color: var(--text-primary);
      font-family: var(--font);
      font-size: 0.9375rem;
      margin-bottom: 10px;
      transition: all 0.2s ease;
    }

    .editor-item input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-glow);
    }

    .editor-item-actions { display: flex; justify-content: flex-end; }

    .editor-item-actions button {
      padding: 8px 16px;
      background: rgba(244, 63, 94, 0.15);
      color: var(--danger);
      border: 1px solid rgba(244, 63, 94, 0.2);
      border-radius: 8px;
      font-family: var(--font);
      font-size: 0.8125rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .editor-item-actions button:hover { background: rgba(244, 63, 94, 0.25); }

    .editor-actions { display: flex; gap: 12px; margin-top: 16px; }
    .editor-actions .btn { flex: 1; }

    /* ==================== EMPTY STATE ==================== */
    .empty-state {
      text-align: center;
      padding: 60px 28px;
      animation: fadeIn 0.5s var(--ease-out-expo);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .empty-icon {
      font-size: 5rem;
      margin-bottom: 24px;
      opacity: 0.6;
      animation: float 4s ease-in-out infinite;
    }

    .empty-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 12px;
      background: linear-gradient(135deg, #fff, rgba(255,255,255,0.7));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .empty-desc {
      font-size: 1rem;
      color: var(--text-secondary);
      max-width: 280px;
      margin: 0 auto;
      line-height: 1.6;
    }

    /* ==================== TOAST ==================== */
    .toast-container {
      position: fixed;
      top: calc(80px + var(--safe-top));
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .toast {
      padding: 14px 24px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 100px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      font-size: 0.9375rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      animation: toastIn 0.4s var(--ease-out-back);
    }

    .toast.success { border-color: rgba(16, 185, 129, 0.3); color: #34d399; }
    .toast.error { border-color: rgba(244, 63, 94, 0.3); color: #fb7185; }

    @keyframes toastIn {
      from { opacity: 0; transform: translateY(-20px) scale(0.9); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* ==================== UTILITIES ==================== */
    .hidden { display: none !important; }

    /* ==================== RESPONSIVE ==================== */
    @media (min-width: 640px) {
      .main {
        padding: 28px;
        padding-bottom: calc(300px + var(--safe-bottom));
      }

      .flashcard { min-height: 380px; }
      .card-text { font-size: 1.75rem; }

      .bottom-bar {
        padding: 24px;
        padding-bottom: calc(24px + var(--safe-bottom));
        border-radius: 28px 28px 0 0;
      }

      .btn-action { height: 64px; }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Swipe Indicators -->
    <div class="swipe-indicator left" id="swipeL">‚úó</div>
    <div class="swipe-indicator right" id="swipeR">‚úì</div>

    <!-- Header -->
    <header class="header">
      <div class="header-inner">
        <div class="brand">
          <div class="logo"></div>
          <div class="brand-info">
            <div class="brand-name">Albinyok Flashcards</div>
            <div class="brand-tagline" id="brandTagline">–£—á–∏—Å—å —É–º–Ω–µ–µ</div>
          </div>
        </div>
        <div class="header-actions">
          <select class="select" id="langSelect">
            <option value="ru">üá∑üá∫ RU</option>
            <option value="en">üá¨üáß EN</option>
            <option value="fr">üá´üá∑ FR</option>
          </select>
          <button class="btn btn-icon" id="themeBtn" title="Toggle theme">üåô</button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Study View -->
      <div id="studyView" class="hidden">
        <!-- Stats Bar -->
        <div class="stats-bar">
          <div class="progress-section">
            <div class="progress-track">
              <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <span class="progress-label" id="progressLabel">0/0</span>
          </div>
          <div class="stat-badges">
            <span class="stat-badge success">‚úì <span id="knownCount">0</span></span>
            <span class="stat-badge danger">‚úó <span id="unknownCount">0</span></span>
          </div>
        </div>

        <!-- Categories -->
        <div class="categories hidden" id="catContainer"></div>

        <!-- Flashcard -->
        <div class="card-container" id="cardContainer">
          <div class="flashcard" id="flashcard">
            <div class="card-face card-front">
              <span class="card-label num" id="cardNum">#1</span>
              <span class="card-label cat" id="cardCat"></span>
              <div class="card-text" id="questionText">Question goes here</div>
              <span class="card-hint" id="cardHint">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M8 7h12M8 12h12M8 17h12M4 7h.01M4 12h.01M4 17h.01"/>
                </svg>
                <span id="tapHintText">Tap to reveal</span>
              </span>
            </div>
            <div class="card-face card-back">
              <span class="card-label num" id="cardNum2">#1</span>
              <div class="card-text" id="answerText">Answer goes here</div>
            </div>
          </div>
        </div>

        <!-- Hint Box -->
        <div class="hint-box hidden" id="hintBox">
          <span class="hint-icon">üí°</span>
          <span class="hint-text" id="hintText"></span>
        </div>
      </div>

      <!-- Empty State -->
      <div id="emptyView">
        <div class="empty-state">
          <div class="empty-icon">üìö</div>
          <div class="empty-title" id="emptyTitle">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏</div>
          <div class="empty-desc" id="emptyDesc">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ CSV —Ñ–∞–π–ª –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ Google Sheets</div>
        </div>
      </div>

      <!-- Sections -->
      <div id="sectionsContainer">
        <!-- Upload Section -->
        <section class="section open" id="secUpload">
          <div class="section-header" data-section="secUpload">
            <span class="section-title">
              <span class="section-title-icon">üìÅ</span>
              <span id="uploadTitle">–ó–∞–≥—Ä—É–∑–∏—Ç—å</span>
            </span>
            <span class="section-arrow">‚ñº</span>
          </div>
          <div class="section-body">
            <div class="upload-zone" id="dropZone">
              <div class="upload-icon">üìÑ</div>
              <div class="upload-text"><strong>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ</strong> CSV —Ñ–∞–π–ª —Å—é–¥–∞</div>
              <input type="file" id="fileInput" accept=".csv,.tsv" hidden>
              <div class="upload-buttons">
                <button class="btn btn-primary" id="browseBtn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</button>
                <button class="btn btn-secondary" id="demoBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ–º–æ</button>
              </div>
            </div>
            <input type="url" class="input-field" id="urlInput" placeholder="https://docs.google.com/spreadsheets/..." style="margin-top: 16px;">
            <button class="btn btn-primary" style="width: 100%; margin-top: 12px;" id="urlBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ</button>
          </div>
        </section>

        <!-- Decks Section -->
        <section class="section hidden" id="secDecks">
          <div class="section-header" data-section="secDecks">
            <span class="section-title">
              <span class="section-title-icon">üìö</span>
              <span id="decksTitle">–ö–æ–ª–æ–¥—ã</span>
            </span>
            <span class="section-arrow">‚ñº</span>
          </div>
          <div class="section-body">
            <div class="deck-list" id="deckList"></div>
            <div class="deck-actions">
              <button class="btn btn-secondary" id="newDeckBtn">‚ûï –ù–æ–≤–∞—è</button>
              <button class="btn btn-secondary" id="delDeckBtn">üóë –£–¥–∞–ª–∏—Ç—å</button>
            </div>
          </div>
        </section>

        <!-- AI Generator Section -->
        <section class="section" id="secAI">
          <div class="section-header" data-section="secAI">
            <span class="section-title">
              <span class="section-title-icon">ü§ñ</span>
              <span id="aiTitle">AI –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</span>
            </span>
            <span class="section-arrow">‚ñº</span>
          </div>
          <div class="section-body">
            <textarea class="input-field" id="aiText" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –ª—é–±–æ–π —Ç–µ–∫—Å—Ç –∏ AI —Å–æ–∑–¥–∞—Å—Ç –∫–∞—Ä—Ç–æ—á–∫–∏..."></textarea>
            <div class="ai-options">
              <select class="select" id="aiCount">
                <option value="5">5 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
                <option value="10" selected>10 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
                <option value="15">15 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
                <option value="20">20 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
              </select>
              <select class="select" id="aiLang">
                <option value="same">–ö–∞–∫ –≤ —Ç–µ–∫—Å—Ç–µ</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="en">English</option>
                <option value="fr">Fran√ßais</option>
              </select>
            </div>
            <details style="margin-bottom: 16px;">
              <summary style="font-size: 0.875rem; color: var(--text-secondary); cursor: pointer; padding: 8px 0;">üîë API –∫–ª—é—á (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</summary>
              <div style="margin-top: 12px; display: flex; gap: 10px;">
                <select class="select" id="aiProvider" style="flex: 0 0 110px;">
                  <option value="anthropic">Claude</option>
                  <option value="openai">GPT</option>
                </select>
                <input type="password" class="input-field" id="aiKey" placeholder="sk-..." style="flex: 1;">
              </div>
            </details>
            <button class="btn btn-primary" style="width: 100%;" id="generateBtn">‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
            <div class="ai-loading hidden" id="aiLoading">
              <div class="spinner"></div>
              <span>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</span>
            </div>
            <div class="ai-preview hidden" id="aiPreview">
              <div id="aiPreviewList"></div>
              <div class="ai-preview-actions">
                <button class="btn btn-primary" id="acceptBtn">‚úì –î–æ–±–∞–≤–∏—Ç—å</button>
                <button class="btn btn-secondary" id="discardBtn">–û—Ç–º–µ–Ω–∞</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Settings Section -->
        <section class="section" id="secSettings">
          <div class="section-header" data-section="secSettings">
            <span class="section-title">
              <span class="section-title-icon">‚öôÔ∏è</span>
              <span id="settingsTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </span>
            <span class="section-arrow">‚ñº</span>
          </div>
          <div class="section-body">
            <div class="setting-item">
              <div class="setting-info">
                <h4 id="testModeLabel">–†–µ–∂–∏–º —Ç–µ—Å—Ç–∞</h4>
                <p id="testModeDesc">–û—Ç–≤–µ—Ç–∏—Ç—å –ø–µ—Ä–µ–¥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º</p>
              </div>
              <div class="toggle" id="toggleTest" data-key="testMode"></div>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <h4 id="srLabel">–ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ</h4>
                <p id="srDesc">–ê–ª–≥–æ—Ä–∏—Ç–º SM-2</p>
              </div>
              <div class="toggle on" id="toggleSR" data-key="spacedRepetition"></div>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <h4 id="hardLabel">–¢–æ–ª—å–∫–æ —Å–ª–æ–∂–Ω—ã–µ</h4>
                <p id="hardDesc">–§–æ–∫—É—Å –Ω–∞ —Ç—Ä—É–¥–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–∫–∞—Ö</p>
              </div>
              <div class="toggle" id="toggleHard" data-key="hardOnly"></div>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <h4 id="shuffleLabel">–ü–µ—Ä–µ–º–µ—à–∞—Ç—å</h4>
                <p id="shuffleDesc">–°–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫</p>
              </div>
              <div class="toggle" id="toggleShuffle" data-key="shuffle"></div>
            </div>
            <div class="settings-actions">
              <button class="btn btn-secondary" id="resetBtn">üîÑ –°–±—Ä–æ—Å</button>
              <button class="btn btn-secondary" id="exportBtn">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
              <button class="btn btn-secondary" id="editorBtn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä</button>
            </div>
          </div>
        </section>

        <!-- Editor Section -->
        <section class="section hidden" id="secEditor">
          <div class="section-header" data-section="secEditor">
            <span class="section-title">
              <span class="section-title-icon">‚úèÔ∏è</span>
              <span id="editorTitle">–†–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫</span>
            </span>
            <span class="section-arrow">‚ñº</span>
          </div>
          <div class="section-body">
            <div id="editorList"></div>
            <div class="editor-actions">
              <button class="btn btn-secondary" id="addCardBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
              <button class="btn btn-primary" id="saveCardsBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Bottom Bar -->
    <div class="bottom-bar hidden" id="bottomBar">
      <div class="bottom-bar-inner">
        <div class="controls-row">
          <button class="btn btn-action btn-flip" id="flipBtn">
            üëÅ <span id="flipText">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</span>
          </button>
          <button class="btn btn-action btn-warning" id="hintBtn" style="flex: 0 0 60px;">üí°</button>
        </div>
        <div class="controls-row">
          <button class="btn btn-action btn-danger" id="noBtn" disabled>
            ‚úó <span id="noText">–ù–µ –∑–Ω–∞—é</span>
          </button>
          <button class="btn btn-action btn-success" id="yesBtn" disabled>
            ‚úì <span id="yesText">–ó–Ω–∞—é</span>
          </button>
        </div>
        <div class="controls-nav">
          <button class="nav-btn" id="prevBtn">‚Üê <span id="prevText">–ù–∞–∑–∞–¥</span></button>
          <button class="nav-btn" id="shuffleNavBtn">üîÄ</button>
          <button class="nav-btn" id="nextBtn"><span id="nextText">–î–∞–ª–µ–µ</span> ‚Üí</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="flashcards.js"></script>
</body>
</html>
